<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sikkim Explorer XYPHER</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=Dancing+Script:700|Montserrat:900,700,400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
</head>
<body>
  <!-- Welcome Overlay -->
  <div id="welcome-fullscreen">
    <div class="welcome-main">
      <div class="welcome-title">WELCOME TO <span>SIKKIM</span></div>
      <div class="welcome-team">â€“ Xypher</div>
      <button class="cta" id="enter-btn">Get Started</button>
    </div>
  </div>

  <!-- Main App -->
  <div id="main-app" style="opacity:0;">
    <nav id="main-navbar">
      <div class="brand">Sikkim Explorer <span class="brand-team">â€“ Xypher</span></div>
      <ul class="tab-menu">
        <li data-tab="dashboard" class="active">Dashboard</li>
        <li data-tab="achievements">Achievements</li>
        <li data-tab="culture">Culture</li>
        <li data-tab="monasteries">Monasteries</li>
        <li data-tab="hotels">Hotels & Restaurants</li>
        <li data-tab="map">Map</li>
      </ul>
    </nav>
    <!-- DASHBOARD -->
    <section id="dashboard" class="tabsection active">
      <div class="dashboard-hero">
        <h2>Welcome to Sikkim Explorer</h2>
        <p>Gamified journey: explore monasteries, unlock levels, plan your stay, and track your achievements!</p>
        <div class="team-signature">â€“ Xypher</div>
        <!-- Level System -->
        <div class="level-system">
          <div><b>Your Level:</b> <span id="level-name" class="level-badge">Beginner</span></div>
          <div class="level-bar-bg"><div id="level-bar" class="level-bar"></div></div>
          <div id="level-count">Monasteries visited: <span id="visited-count">0</span>/7</div>
        </div>
      </div>
    </section>
    <!-- ACHIEVEMENTS -->
    <section id="achievements" class="tabsection">
      <h2 class="dashboard-hero">Achievements</h2>
      <ul class="achievements-list">
        <li><b>ğŸŸ¢ Monastery Master:</b> Visit all 7 monasteries</li>
        <li><b>ğŸ’  Culture Star:</b> Explore all culture sections</li>
        <li><b>ğŸ“ Trip Maker:</b> Add at least 2 hotels/restaurants to your list</li>
        <li><b>ğŸ•¹ï¸ Level Up:</b> Reach Level 7</li>
      </ul>
    </section>
    <!-- CULTURE -->
    <section id="culture" class="tabsection">
      <h2 class="dashboard-hero">Culture</h2>
      <div class="section-content">
        <!-- (Your unchanged deep culture content goes here) -->
        <!-- ... as per your previous requirements ... -->
        <div class="culture-section">
          <h3>ğŸ”ï¸ Ethnic Groups & Language</h3>
          <ul>
            <li><b>Lepchas:</b> The aboriginals, â€œRongkup,â€ animists; Lepcha language, sacred lakes & Mt. Khangchendzonga.</li>
            <li><b>Bhutias:</b> Tibetan roots, Buddhist, speak Sikkimese, major monastery builders.</li>
            <li><b>Nepalis:</b> Gorkha heritage, Hindu or Buddhist, agricultural leaders.</li>
            <li><b>Others:</b> Limbus, Sherpas, Gurungs, Tamangs, and more.</li>
          </ul>
        </div>
        <!-- ... (keep rest unchanged) ... -->
      </div>
    </section>
    <!-- MONASTERIES -->
    <section id="monasteries" class="tabsection">
      <h2 class="dashboard-hero">Explore Monasteries (Click Info or Locate)</h2>
      <div class="monastery-grid">
        <!-- Repeat this block for all 7 monasteries, use your images and Wikipedia links -->
        <div class="mon-card">
          <div class="mon-imgbox"><img src="1000020084.jpg" alt="Rumtek"></div>
          <div class="mon-title">Rumtek</div>
          <div class="mon-desc">Seat of the Karmapa, golden roofs, Kagyu rituals.</div>
          <div class="mon-card-btns">
            <button type="button" onclick="window.open('https://en.wikipedia.org/wiki/Rumtek_Monastery','_blank');">Info</button>
            <button type="button" onclick="window.open('https://www.google.com/maps/dir/?api=1&destination=27.3158,88.5465','_blank');">Locate</button>
          </div>
        </div>
        <!-- Repeat for the rest... (see previous completions for all blocks) -->
      </div>
    </section>
    <!-- HOTELS & RESTAURANTS -->
    <section id="hotels" class="tabsection">
      <h2 class="dashboard-hero">Hotels & Restaurants Near Monasteries</h2>
      <div class="hotel-section">
        <!-- Example for Rumtek -->
        <div class="hotel-group">
          <h3>Rumtek</h3>
          <ul>
            <li>Mayal Retreat <button onclick="window.open('https://www.google.com/maps?q=Mayal+Retreat+Resort+Sikkim','_blank');">Locate</button></li>
            <li>Cafe Live & Loud <button onclick="window.open('https://www.google.com/maps?q=Cafe+Live+%26+Loud+Sikkim','_blank');">Locate</button></li>
            <li>Bakerâ€™s Cafe <button onclick="window.open('https://www.google.com/maps?q=Bakers+Cafe+Gangtok','_blank');">Locate</button></li>
            <li>Roll House <button onclick="window.open('https://www.google.com/maps?q=Roll+House+Gangtok','_blank');">Locate</button></li>
            <li>Nimtho <button onclick="window.open('https://www.google.com/maps?q=Nimtho+Gangtok','_blank');">Locate</button></li>
          </ul>
        </div>
        <!-- Repeat this group for all 7 monasteries, for a total of ~28-35 entries, using real names from TripAdvisor/Google or your favorites. -->
      </div>
    </section>
    <!-- MAP (with user position and monastery markers) -->
    <section id="map" class="tabsection">
      <h2 class="dashboard-hero">Interactive Monastery Map</h2>
      <div id="mapid" style="height:400px;width:100%;border-radius:12px;margin-bottom:12px;"></div>
      <div id="route-info" class="route-info"></div>
      <p class="map-prompt">ğŸ’¡ Click any pin for more info and directions, or use your GPS for live navigation.</p>
    </section>
  </div>
  <div id="game-bg"></div>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    // Welcome screen logic
    document.getElementById('enter-btn').onclick = function() {
      document.getElementById('welcome-fullscreen').style.opacity = 0;
      setTimeout(()=>{
        document.getElementById('welcome-fullscreen').style.display = "none";
        document.getElementById('main-app').style.opacity = 1;
      }, 800);
    };
    // Tabs logic
    document.querySelectorAll('.tab-menu li').forEach(li => {
      li.onclick = function() {
        document.querySelectorAll('.tab-menu li').forEach(x=>x.classList.remove('active'));
        document.querySelectorAll('.tabsection').forEach(x=>x.classList.remove('active'));
        li.classList.add('active');
        let section = document.getElementById(li.dataset.tab);
        if(section) section.classList.add('active');
        if(li.dataset.tab === 'map') { setTimeout(initMap, 200);}
      };
    });
    // Level system demo (click team signature to increment)
    let visited = 0;
    const levelNames = ["Beginner", "Novice", "Explorer", "Adept", "Expert", "Master", "Legend"];
    document.querySelector('.team-signature').onclick = function() {
      visited = Math.min(7, visited + 1);
      updateLevel();
    };
    function updateLevel() {
      let level = Math.min(levelNames.length-1, Math.floor(visited));
      document.getElementById('visited-count').innerText = visited;
      document.getElementById('level-name').innerText = levelNames[level];
      let pct = (visited/7)*100;
      document.getElementById('level-bar').style.width = pct+"%";
    }
    updateLevel();
    // MAP (uses Leaflet, with markers and user location)
    let mapLoaded = false;
    function initMap() {
      if(mapLoaded) return;
      mapLoaded = true;
      let monasteries = [
        {name:"Rumtek",coords:[27.3158,88.5465],gmaps:"https://www.google.com/maps/dir/?api=1&destination=27.3158,88.5465"},
        {name:"Pemayangtse",coords:[27.2945,88.2122],gmaps:"https://www.google.com/maps/dir/?api=1&destination=27.2945,88.2122"},
        {name:"Ralang",coords:[27.219,88.366],gmaps:"https://www.google.com/maps/dir/?api=1&destination=27.219,88.366"},
        {name:"Dubdi",coords:[27.3667,88.2167],gmaps:"https://www.google.com/maps/dir/?api=1&destination=27.3667,88.2167"},
        {name:"Phodong",coords:[27.3668,88.6014],gmaps:"https://www.google.com/maps/dir/?api=1&destination=27.3668,88.6014"},
        {name:"Enchey",coords:[27.3389,88.6167],gmaps:"https://www.google.com/maps/dir/?api=1&destination=27.3389,88.6167"},
        {name:"Tsuklakhang",coords:[27.334,88.613],gmaps:"https://www.google.com/maps/dir/?api=1&destination=27.334,88.613"}
      ];
      const map = L.map('mapid').setView([27.33, 88.62], 8);
      L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 16, attribution: 'Â© OpenStreetMap contributors'}).addTo(map);
      monasteries.forEach((m,i)=>{
        L.marker(m.coords)
         .addTo(map)
         .bindPopup(`<b>${m.name}</b><br><a href="${m.gmaps}" target="_blank">Get Directions â–¶</a>`);
      });
      if(navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(pos){
          let latlng = [pos.coords.latitude, pos.coords.longitude];
          L.circleMarker(latlng, {
            radius: 9, color:"#1feaff", fillColor:"#7fffd4", fillOpacity:0.9, weight:3
          }).addTo(map).bindPopup("You are here!");
          map.setView(latlng, 11);
        });
      }
    }
  </script>
</body>
</html>
